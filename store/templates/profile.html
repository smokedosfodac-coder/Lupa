{% extends 'base.html' %}
{% load humanize %}

{% block title %}Minha Conta{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 3rem auto; padding: 2rem;">
    <h1 style="margin-bottom: 2rem;">OlÃ¡, {{ user.first_name }} ðŸ‘‹</h1>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
        
        <div style="background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
            <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">Meus Dados</h2>
            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" style="background: #0071e3; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold;">
                    Salvar AlteraÃ§Ãµes
                </button>
            </form>
        </div>

        <div>
            <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">Meus Pedidos</h2>
            {% for order in orders %}
                <div style="background: white; padding: 1.5rem; border-radius: 12px; margin-bottom: 1rem; border: 1px solid #eee;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Pedido #{{ order.id }}</strong>
                        <span style="background: #eee; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem;">{{ order.get_status_display }}</span>
                    </div>
                    <p style="color: #666; font-size: 0.9rem;">{{ order.created_at|date:"d/m/Y" }}</p>
                    <p style="font-weight: bold; margin-top: 5px;">R$ {{ order.total_price|intcomma }}</p>
                    <a href="{% url 'order_detail' order.id %}" style="display: block; margin-top: 10px; color: #0071e3; text-decoration: none; font-size: 0.9rem;">Ver Detalhes â†’</a>
                </div>
            {% empty %}
                <p>VocÃª ainda nÃ£o fez pedidos.</p>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    /* Estilo rÃ¡pido para o form ficar bonito */
    input { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
    label { display: block; margin-bottom: 5px; font-weight: 600; color: #333; }
</style>
{% endblock %}